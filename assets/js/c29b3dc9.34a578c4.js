"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8555],{5848:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>d,metadata:()=>r,toc:()=>o});var s=n(5893),l=n(1151);const d={},t="Subsidy",r={id:"solidity-docs/Subsidy",title:"Subsidy",description:"rbi",source:"@site/versioned_docs/version-v1.x/solidity-docs/Subsidy.md",sourceDirName:"solidity-docs",slug:"/solidity-docs/Subsidy",permalink:"/docs/solidity-docs/Subsidy",draft:!1,unlisted:!1,editUrl:"https://github.com/privacy-scaling-explorations/maci/edit/dev/website/versioned_docs/version-v1.x/solidity-docs/Subsidy.md",tags:[],version:"v1.x",frontMatter:{},sidebar:"version-1.x/mySidebar",previous:{title:"SignUpToken",permalink:"/docs/solidity-docs/SignUpToken"},next:{title:"Tally",permalink:"/docs/solidity-docs/Tally"}},c={},o=[{value:"rbi",id:"rbi",level:3},{value:"cbi",id:"cbi",level:3},{value:"sbCommitment",id:"sbcommitment",level:3},{value:"subsidyCommitment",id:"subsidycommitment",level:3},{value:"treeArity",id:"treearity",level:3},{value:"ProcessingNotComplete",id:"processingnotcomplete",level:3},{value:"InvalidSubsidyProof",id:"invalidsubsidyproof",level:3},{value:"AllSubsidyCalculated",id:"allsubsidycalculated",level:3},{value:"VkNotSet",id:"vknotset",level:3},{value:"NumSignUpsTooLarge",id:"numsignupstoolarge",level:3},{value:"RbiTooLarge",id:"rbitoolarge",level:3},{value:"CbiTooLarge",id:"cbitoolarge",level:3},{value:"verifier",id:"verifier",level:3},{value:"constructor",id:"constructor",level:3},{value:"updateSbCommitment",id:"updatesbcommitment",level:3},{value:"genSubsidyPackedVals",id:"gensubsidypackedvals",level:3},{value:"genSubsidyPublicInputHash",id:"gensubsidypublicinputhash",level:3},{value:"updateSubsidy",id:"updatesubsidy",level:3},{value:"increaseSubsidyIndex",id:"increasesubsidyindex",level:3},{value:"Parameters",id:"parameters",level:4},{value:"verifySubsidyProof",id:"verifysubsidyproof",level:3}];function a(e){const i={code:"code",h1:"h1",h3:"h3",h4:"h4",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h1,{id:"subsidy",children:"Subsidy"}),"\n",(0,s.jsx)(i.h3,{id:"rbi",children:"rbi"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"uint256 rbi\n"})}),"\n",(0,s.jsx)(i.h3,{id:"cbi",children:"cbi"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"uint256 cbi\n"})}),"\n",(0,s.jsx)(i.h3,{id:"sbcommitment",children:"sbCommitment"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"uint256 sbCommitment\n"})}),"\n",(0,s.jsx)(i.h3,{id:"subsidycommitment",children:"subsidyCommitment"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"uint256 subsidyCommitment\n"})}),"\n",(0,s.jsx)(i.h3,{id:"treearity",children:"treeArity"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"uint8 treeArity\n"})}),"\n",(0,s.jsx)(i.h3,{id:"processingnotcomplete",children:"ProcessingNotComplete"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"error ProcessingNotComplete()\n"})}),"\n",(0,s.jsx)(i.h3,{id:"invalidsubsidyproof",children:"InvalidSubsidyProof"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"error InvalidSubsidyProof()\n"})}),"\n",(0,s.jsx)(i.h3,{id:"allsubsidycalculated",children:"AllSubsidyCalculated"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"error AllSubsidyCalculated()\n"})}),"\n",(0,s.jsx)(i.h3,{id:"vknotset",children:"VkNotSet"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"error VkNotSet()\n"})}),"\n",(0,s.jsx)(i.h3,{id:"numsignupstoolarge",children:"NumSignUpsTooLarge"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"error NumSignUpsTooLarge()\n"})}),"\n",(0,s.jsx)(i.h3,{id:"rbitoolarge",children:"RbiTooLarge"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"error RbiTooLarge()\n"})}),"\n",(0,s.jsx)(i.h3,{id:"cbitoolarge",children:"CbiTooLarge"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"error CbiTooLarge()\n"})}),"\n",(0,s.jsx)(i.h3,{id:"verifier",children:"verifier"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"contract Verifier verifier\n"})}),"\n",(0,s.jsx)(i.h3,{id:"constructor",children:"constructor"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"constructor(contract Verifier _verifier) public\n"})}),"\n",(0,s.jsx)(i.h3,{id:"updatesbcommitment",children:"updateSbCommitment"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"function updateSbCommitment(contract MessageProcessor _mp) public\n"})}),"\n",(0,s.jsx)(i.h3,{id:"gensubsidypackedvals",children:"genSubsidyPackedVals"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"function genSubsidyPackedVals(uint256 _numSignUps) public view returns (uint256)\n"})}),"\n",(0,s.jsx)(i.h3,{id:"gensubsidypublicinputhash",children:"genSubsidyPublicInputHash"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"function genSubsidyPublicInputHash(uint256 _numSignUps, uint256 _newSubsidyCommitment) public view returns (uint256)\n"})}),"\n",(0,s.jsx)(i.h3,{id:"updatesubsidy",children:"updateSubsidy"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"function updateSubsidy(contract Poll _poll, contract MessageProcessor _mp, uint256 _newSubsidyCommitment, uint256[8] _proof) external\n"})}),"\n",(0,s.jsx)(i.h3,{id:"increasesubsidyindex",children:"increaseSubsidyIndex"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"function increaseSubsidyIndex(uint256 batchSize, uint256 numLeaves) internal\n"})}),"\n",(0,s.jsx)(i.p,{children:"increase subsidy batch index (rbi, cbi) to next,\nit will try to cbi++ if the whole batch can fit into numLeaves\notherwise it will increase row index: rbi++\neach batch for subsidy calculation is 2 dimenional: batchSize*batchSize"}),"\n",(0,s.jsx)(i.h4,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Name"}),(0,s.jsx)(i.th,{children:"Type"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"batchSize"}),(0,s.jsx)(i.td,{children:"uint256"}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"numLeaves"}),(0,s.jsx)(i.td,{children:"uint256"}),(0,s.jsx)(i.td,{})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"verifysubsidyproof",children:"verifySubsidyProof"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-solidity",children:"function verifySubsidyProof(contract Poll _poll, uint256[8] _proof, uint256 _numSignUps, uint256 _newSubsidyCommitment) public view returns (bool)\n"})})]})}function u(e={}){const{wrapper:i}={...(0,l.a)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},1151:(e,i,n)=>{n.d(i,{Z:()=>r,a:()=>t});var s=n(7294);const l={},d=s.createContext(l);function t(e){const i=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(d.Provider,{value:i},e.children)}}}]);