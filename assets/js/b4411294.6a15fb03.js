"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2710],{2783:(e,a,s)=>{s.r(a),s.d(a,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>n,metadata:()=>o,toc:()=>h});var t=s(5893),i=s(1151);const n={},r="FAQ",o={id:"v0.x/faq",title:"FAQ",description:"- I: Attacks and mitigations",source:"@site/docs/v0.x/faq.md",sourceDirName:"v0.x",slug:"/v0.x/faq",permalink:"/maci/docs/v0.x/faq",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/v0.x/faq.md",tags:[],version:"current",frontMatter:{},sidebar:"docSidebar",previous:{title:"The quadratic vote tallying circuit",permalink:"/maci/docs/v0.x/quadratic_vote_tallying_circuit"}},l={},h=[{value:"I: Attacks and mitigations",id:"i-attacks-and-mitigations",level:2},{value:"If the coordinator censors messages",id:"if-the-coordinator-censors-messages",level:3},{value:"If a user submits a message with an invalid signature",id:"if-a-user-submits-a-message-with-an-invalid-signature",level:3},{value:"If an adversarial miner bribes a user and controls the <code>randomLeaf</code> value passed into the state transition snark",id:"if-an-adversarial-miner-bribes-a-user-and-controls-the-randomleaf-value-passed-into-the-state-transition-snark",level:3},{value:"User creates a command that the snark cannot process",id:"user-creates-a-command-that-the-snark-cannot-process",level:3},{value:"If a briber locks the user&#39;s key in trusted hardware",id:"if-a-briber-locks-the-users-key-in-trusted-hardware",level:3},{value:"Deposit my public key and i will pay you",id:"deposit-my-public-key-and-i-will-pay-you",level:3},{value:"If an attacker fills up the message tree with a such a large number of commands that the coordinator cannot afford to generate enough proofs to process them all",id:"if-an-attacker-fills-up-the-message-tree-with-a-such-a-large-number-of-commands-that-the-coordinator-cannot-afford-to-generate-enough-proofs-to-process-them-all",level:3},{value:"II: Claims / required invariants",id:"ii-claims--required-invariants",level:2},{value:"III: Desired features not described in this specification",id:"iii-desired-features-not-described-in-this-specification",level:2},{value:"IV: Quadratic and sybil-resistant million-dollar-homepages",id:"iv-quadratic-and-sybil-resistant-million-dollar-homepages",level:2}];function c(e){const a={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.h1,{id:"faq",children:"FAQ"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.a,{href:"#i-attacks-and-mitigations",children:"I: Attacks and mitigations"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.a,{href:"#if-the-coordinator-censors-messages",children:"If the coordinator censors messages"})}),"\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.a,{href:"#if-a-user-submits-a-message-with-an-invalid-signature",children:"If a user submits a message with an invalid signature"})}),"\n",(0,t.jsx)(a.li,{children:(0,t.jsxs)(a.a,{href:"#if-an-adversarial-miner-bribes-a-user-and-controls-the-randomleaf-value-passed-into-the-state-transition-snark",children:["If an adversarial miner bribes a user and controls the ",(0,t.jsx)(a.code,{children:"randomLeaf"})," value passed into the state transition snark"]})}),"\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.a,{href:"#user-creates-a-command-that-the-snark-cannot-process",children:"User creates a command that the snark cannot process"})}),"\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.a,{href:"#if-a-briber-locks-the-users-key-in-trusted-hardware",children:"If a briber locks the user's key in trusted hardware"})}),"\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.a,{href:"#deposit-my-public-key-and-i-will-pay-you",children:"Deposit my public key and i will pay you"})}),"\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.a,{href:"#if-an-attacker-fills-up-the-message-tree-with-a-such-a-large-number-of-commands-that-the-coordinator-cannot-afford-to-generate-enough-proofs-to-process-them-all",children:"If an attacker fills up the message tree with a such a large number of commands that the coordinator cannot afford to generate enough proofs to process them all"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.a,{href:"#ii-claims--required-invariants",children:"II: Claims / required invariants"})}),"\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.a,{href:"#iii-desired-features-not-described-in-this-specification",children:"III: Desired features not described in this specification"})}),"\n",(0,t.jsx)(a.li,{children:(0,t.jsx)(a.a,{href:"#iv-quadratic-and-sybil-resistant-million-dollar-homepages",children:"IV: Quadratic and sybil-resistant million-dollar-homepages"})}),"\n"]}),"\n",(0,t.jsx)(a.h2,{id:"i-attacks-and-mitigations",children:"I: Attacks and mitigations"}),"\n",(0,t.jsx)(a.h3,{id:"if-the-coordinator-censors-messages",children:"If the coordinator censors messages"}),"\n",(0,t.jsxs)(a.p,{children:["If the coordinator censors a message ",(0,t.jsx)(a.code,{children:"N"})," by excluding it from the final vote tally, the logic in ",(0,t.jsx)(a.code,{children:"processMessage()"})," will prevent them from processsing message ",(0,t.jsx)(a.code,{children:"N+1"})," or any future message until they do so."]}),"\n",(0,t.jsx)(a.h3,{id:"if-a-user-submits-a-message-with-an-invalid-signature",children:"If a user submits a message with an invalid signature"}),"\n",(0,t.jsx)(a.p,{children:"The coordinator should verify the message's signature off-chain and if it is invalid, set the no-op flag to true and pass it into the state transition proof circuit. If the coordinator does not do this, they will fail to generate a valid proof anyway."}),"\n",(0,t.jsxs)(a.h3,{id:"if-an-adversarial-miner-bribes-a-user-and-controls-the-randomleaf-value-passed-into-the-state-transition-snark",children:["If an adversarial miner bribes a user and controls the ",(0,t.jsx)(a.code,{children:"randomLeaf"})," value passed into the state transition snark"]}),"\n",(0,t.jsx)(a.p,{children:"This adversary does not know the value of the other leaves of the state tree, so even if the coordinator updates leaf 0 with the adversary's entropy, the adversary cannot tell if the processed commmand is invalid."}),"\n",(0,t.jsx)(a.h3,{id:"user-creates-a-command-that-the-snark-cannot-process",children:"User creates a command that the snark cannot process"}),"\n",(0,t.jsx)(a.p,{children:"The the system must be designed and built in a way such that this cannot happen."}),"\n",(0,t.jsx)(a.h3,{id:"if-a-briber-locks-the-users-key-in-trusted-hardware",children:"If a briber locks the user's key in trusted hardware"}),"\n",(0,t.jsx)(a.p,{children:"Assuming that the locked key is not the user's initial public key, the briber has no way to tell if the user has not already changed their key. This scenario is therefore the same as that in which the user gives a public key to a briber witout trusted hardware."}),"\n",(0,t.jsxs)(a.blockquote,{children:["\n",(0,t.jsx)(a.p,{children:"[name=kobi]\nI don't think the reasoning works, for example for a user with trusted hardware:"}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsxs)(a.li,{children:["User has trusted hardware that allows a single key change. The user has initial public key ",(0,t.jsx)(a.code,{className:"language-math math-inline",children:"pk"})," and public key ",(0,t.jsx)(a.code,{className:"language-math math-inline",children:"pk2"})]}),"\n",(0,t.jsxs)(a.li,{children:["User registers with ",(0,t.jsx)(a.code,{className:"language-math math-inline",children:"pk"})]}),"\n",(0,t.jsxs)(a.li,{children:["User changes to ",(0,t.jsx)(a.code,{className:"language-math math-inline",children:"pk2"}),", with the trusted hardware attesting this is the second public key and no further key changes are allowed"]}),"\n",(0,t.jsxs)(a.li,{children:["Briber gets ",(0,t.jsx)(a.code,{className:"language-math math-inline",children:"sk2"})," and the attestation and then uses ",(0,t.jsx)(a.code,{className:"language-math math-inline",children:"pk2"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(a.blockquote,{children:["\n",(0,t.jsxs)(a.p,{children:["[name=barry] I think that the attack is where you lock the initial key in trusted hardware. The solution is to use ",(0,t.jsx)(a.a,{href:"https://www.vitalik.ca/general/2019/10/01/story.html",children:"https://www.vitalik.ca/general/2019/10/01/story.html"})]}),"\n"]}),"\n",(0,t.jsx)(a.h3,{id:"deposit-my-public-key-and-i-will-pay-you",children:"Deposit my public key and i will pay you"}),"\n",(0,t.jsxs)(a.blockquote,{children:["\n",(0,t.jsx)(a.p,{children:"[name=barry] This is the most serious attack IMO. The deposit stake is weak prevention for this."}),"\n"]}),"\n",(0,t.jsx)(a.h3,{id:"if-an-attacker-fills-up-the-message-tree-with-a-such-a-large-number-of-commands-that-the-coordinator-cannot-afford-to-generate-enough-proofs-to-process-them-all",children:"If an attacker fills up the message tree with a such a large number of commands that the coordinator cannot afford to generate enough proofs to process them all"}),"\n",(0,t.jsx)(a.p,{children:"Each user should be allowed to publish at no cost as many messages as there are vote options, plus a small number (e.g. 2). Each subsequent message should cost the user an increasing amount of ETH. When the coordinator processes the message, the contract should return the ETH to the user. As such, the majority of non-malicious users will not have to pay any more than the gas costs to vote, and spammers must put up capital to attack the coordinator."}),"\n",(0,t.jsxs)(a.blockquote,{children:["\n",(0,t.jsx)(a.p,{children:"[barry] there is no way to enforce this limit without allowing for bribary.\n[name=wei jie] how does this have to do with bribery? i understand this to only be an anti-spam mechanism."}),"\n"]}),"\n",(0,t.jsx)(a.h2,{id:"ii-claims--required-invariants",children:"II: Claims / required invariants"}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsx)(a.li,{children:"It is impossible for a coordinator to find a collision in message decryptions. i.e. they cannot decrypt a message to a different command."}),"\n",(0,t.jsx)(a.li,{children:"It is impossible for a user to create a message that the coordinator is not able to process."}),"\n",(0,t.jsx)(a.li,{children:"It is impossible for a user to create a message such that the coordinator is unable to create a zk-SNARK proof of a state root transition."}),"\n",(0,t.jsx)(a.li,{children:"No-one but the coordindator can trustlessly bribe someone."}),"\n"]}),"\n",(0,t.jsx)(a.h2,{id:"iii-desired-features-not-described-in-this-specification",children:"III: Desired features not described in this specification"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"A perpetual sign-up process"}),"\n",(0,t.jsx)(a.li,{children:"Reuse the MACI contract for a new vote. This requires the operator to zero out each user's vote option tree."}),"\n",(0,t.jsx)(a.li,{children:"Mitigations for some of the attacks described above"}),"\n"]}),"\n",(0,t.jsx)(a.h2,{id:"iv-quadratic-and-sybil-resistant-million-dollar-homepages",children:"IV: Quadratic and sybil-resistant million-dollar-homepages"}),"\n",(0,t.jsxs)(a.p,{children:["Another use case for MACI is a ",(0,t.jsx)(a.a,{href:"http://www.milliondollarhomepage.com/",children:"million-dollar-homepage"})," style bulletin board where users can post and quadratically vote on images. A user who owns a ",(0,t.jsx)(a.a,{href:"https://www.poap.xyz/",children:"POAP"})," token from a real-life event can sign up and receive 2 ^ 32 voting tokens per week. To add a picture to the board, they have to burn 1 ETH, which disincentivises spam. The visual prominance of size of each picture scales with the sum of square roots of the votes that it receives."]})]})}function d(e={}){const{wrapper:a}={...(0,i.a)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},1151:(e,a,s)=>{s.d(a,{Z:()=>o,a:()=>r});var t=s(7294);const i={},n=t.createContext(i);function r(e){const a=t.useContext(n);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(n.Provider,{value:a},e.children)}}}]);